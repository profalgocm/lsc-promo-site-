---
import fs from 'fs';
import matter from 'gray-matter';

const posts = fs
  .readdirSync('src/posts')
  .map(file => {
    const content = fs.readFileSync(`src/posts/${file}`, 'utf-8');
    const { data } = matter(content);
    return { ...data };
  })
  .sort((a, b) => new Date(b.date) - new Date(a.date));
---

<html>
  <head>
    <title>LSC Promotions</title>
  </head>
  <body>
    <h1 style="text-align:center; font-size:32px; margin:20px;">Mes Codes Promo</h1>

    {posts.map(post => (
      <div style="padding:20px; border:1px solid #eee; margin:20px; border-radius:10px;">
        <h2>{post.title}</h2>
        <p>{post.description}</p>
        <p><strong>Code :</strong> {post.code}</p>
      </div>
    ))}
  </body>
</html>
